---
title: "Final-Project"
author: "Barbarit Clara and Duyck Louna"
format:
  html: default
  pdf: default
editor: visual
---

# **Effect of Demographic structure on Housing prices - A municipality-level analysis in France from 2014 to 2024**

### Research Question: **How does the demographic composition of a municipality affect local housing prices?**

Understanding the determinants of housing prices has long been a central topic in urban economics. While demand-side factors such as income, interest rates, or credit conditions are often highlighted, demographic composition represents a less explored dimension. Housing demand is affected by demographic structure through household formation, age distribution, family size, and socioeconomic characteristics, which shape the type, size, and location of residences required by local populations. The objective of this project is therefore to study how changes in the demographic structure of French municipalities between 2014 and 2024 have influenced local housing prices.

France is a relevant case study for answering our research question because it displays a wide diversity of spatial and demographic profiles. The French real estate market has undergone significant changes over the past decade, including rising average prices, varying transaction volumes, and growing spatial inequalities. Studying the link between demographic trends and housing prices over a ten-year period can therefore shed light on the mechanisms through which population structure influences local housing markets.

To explore this question, the project combines several datasets. Housing indicators are available at the municipal level and on an annual basis for the period 2014-2024. Demographic data come from French censuses (2011, 2016 and 2022), which provide detailed information on age structure, household size, employment categories, and other population characteristics. Although census variables are only available for a few reference years, they still enable us to capture the significant changes that have occurred in the demographic composition during the period. Working with panel data allows us to track each municipality over time and to observe how changes in its demographic profile are linked to variations in housing prices. The econometric analysis will rely on fixed-effects models, which help isolate the effect of demographic variables by controlling for characteristics specific to each municipality that do not change over time (geography, local amenities, or long-run development patterns). Although causal inference is challenging due to potential reverse causality (high housing prices may attract or deter certain demographic groups), the panel structure helps reduce this concern by observing demographic changes before and after price movements. Additional strategies may also be considered.

Our project is structured as follows. First, we present a descriptive analysis of the main variables in our datasets, using graphical and spatial visualisations to highlight key trends in both housing prices and demographic composition. Then we develop an econometric framework in order to isolate the effect of demographic structure on real estate prices. Finally, we address potential identification challenges, such as reverse causality and omitted variable bias, and discuss how our empirical strategy attempts to mitigate them.

# Libraries

```{r, warning=FALSE, message=FALSE}
here::i_am("BARBARIT-DUYCK-Project.Rproj")
library(here)
library(dplyr)
library(tidyr)
library(ggplot2)
library(vroom)
library(purrr)
library(stringr)
```

# Link to the github project

<https://github.com/lounaduyck-afk/BARBARIT-DUYCK-Project.git>

# Loading and describing the data

## 1) Residential property market data

<https://www.data.gouv.fr/datasets/indicateurs-immobiliers-par-commune-et-par-annee-prix-et-volumes-sur-la-periode-2014-2024>

From this website, we downloaded 11 csv files, each file corresponding to a specific year from 2014 to 2024. Each file gathers aggregate variables related to residential property market at the municipality scale.

The data have been collected by the government, from 2014 to 2024. The latest update was on the 7th of July 2025.

### Methodology

Data come from the treatment of another datagouv database regarding the Request for Property Values. From this initial database, they took only single-sale transfers, for which the values lied between 15,000€ and 10,000,000€, the surface between 10m² and 250m² for apartments, and between 10m² and 400m² for houses.

The population is the residential property transactions in Mainland France. The transactions have been aggregated at the municipalities level, which means that each line corresponds to a municipality for a unique year. Each municipality is identified by its INSEE code.

### Data merging

```{r, warning=FALSE, message=FALSE}
DVF2014 <- vroom(here("Data","dvf2014.csv")) |>
  rename(PropMaison = propmaison,
         PropAppart = propappart)

DVF2015 <- vroom(here("Data","dvf2015.csv")) |>
  rename(PropMaison = propmaison,
         PropAppart = propappart)

DVF2016 <- vroom(here("Data","dvf2016.csv")) |>
  rename(PropMaison = propmaison,
         PropAppart = propappart)

DVF2017 <- vroom(here("Data","dvf2017.csv")) |>
  rename(PropMaison = propmaison,
         PropAppart = propappart)

DVF2018 <- vroom(here("Data","dvf2018.csv")) %>%
  rename(PropMaison = propmaison,
         PropAppart = propappart)

DVF2019 <- vroom(here("Data","dvf2019.csv")) %>%
  rename(PropMaison = propmaison,
         PropAppart = propappart)

DVF2020 <- vroom(here("Data","dvf2020.csv")) |>
  rename(PropMaison = propmaison,
         PropAppart = propappart)

DVF2021 <- vroom(here("Data","dvf2021.csv")) |>
  rename(PropMaison = propmaison,
         PropAppart = propappart)

DVF2022 <- vroom(here("Data","dvf2022.csv")) |>
  rename(PropMaison = propmaison,
         PropAppart = propappart)

DVF2023 <- vroom(here("Data","dvf2023.csv")) |>
  rename(PropMaison = propmaison,
         PropAppart = propappart)

DVF2024 <- vroom(here("Data","dvf2024.csv")) |>
  rename(Annee = annee,
         Nb_mutations = nb_mutations)
```

```{r, warning=FALSE, message=FALSE}
DVF_panel <- bind_rows(
  DVF2014, DVF2015, DVF2016, DVF2017, DVF2018,
  DVF2019, DVF2020, DVF2021, DVF2022, DVF2023, DVF2024) |>
  select(-1)
```

Explanations: after standardizing the labels, we merge our data using bind_rows in order to get panel data.

### Changing the columns type

```{r}
DVF_panel <- DVF_panel |>
  mutate(Annee = as.integer(Annee))
```

### Data descriptions

#### Basic Information

```{r, warning=FALSE, message=FALSE}
nb_columns <- ncol(DVF_panel)

nb_rows <- nrow(DVF_panel)

obs_by_year <- DVF_panel |>
  group_by(Annee) |>
  summarise(n_obs = n()) |>
  arrange(Annee)

summary_table <- tibble(
  Type = c("Columns", "Total Rows", paste("Observations", obs_by_year$Annee, sep=" ")),
  Number = c(nb_columns, nb_rows, obs_by_year$n_obs)
)

summary_table |>
  knitr::kable()
```

#### Variables descriptions

-   INSEE code: a qualitative variable which is unique for each municipality
-   Year
-   The number of transfers: quantitative variable which is the sum of the house sales and flat sales
-   The number of house sales: quantitative variable
-   The number of flat sales: quantitative variable
-   The proportion of house sales in percentage: quantitative variable
-   The proportion of flat sales in percentage: quantitative variable
-   The average price of properties sold in €: quantitative variable
-   The average price per square metre of properties sold in €: quantitative variable
-   The average surface area of properties sold in square metre: quantitative variable
